<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Company Registration ‚Äî InteU</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="../../css/styles.css" />
    <style>
      .registration-container { max-width: 800px; margin: 0 auto; padding: 40px 20px; min-height: 100vh; }
      .registration-header { text-align: center; margin-bottom: 40px; padding-top: 60px; }
      .company-icon { width: 80px; height: 80px; background: linear-gradient(135deg, #4b7be5, #6c5ce7); border-radius: 50%; display:flex; align-items:center; justify-content:center; margin:0 auto 16px; color:#fff; font-size:32px; }
      .registration-title { font-size: 32px; font-weight: 700; color: var(--text); margin-bottom: 8px; }
      .registration-subtitle { color: var(--muted); font-size: 18px; max-width: 600px; margin: 0 auto; }
      .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 24px; }
      .form-section { background: var(--card); border: 1px solid rgba(0,0,0,0.06); border-radius: 14px; box-shadow: var(--shadow); padding: 24px; }
      .form-section h3 { color: var(--primary); margin-bottom: 20px; padding-bottom: 12px; border-bottom: 2px solid rgba(75, 123, 229, 0.1); }
      .full-width { grid-column: 1 / -1; }
      .benefits-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin:32px 0; }
      .benefit-card { background:#f8f9fa; border:1px solid rgba(0,0,0,0.06); border-radius:12px; padding:20px; text-align:center; }
      .benefit-icon { font-size:32px; margin-bottom:12px; display:block; }
      .benefit-title { font-weight:600; margin-bottom:8px; color:var(--text); }
      .benefit-desc { font-size:14px; color:var(--muted); margin:0; }
      .password-requirements { background:#f8f9fa; border:1px solid rgba(0,0,0,0.1); border-radius:8px; padding:16px; margin-top:8px; font-size:14px; }
      .requirement { display:flex; align-items:center; gap:8px; margin-bottom:4px; }
      .requirement.valid { color:#28a745; }
      .requirement.invalid { color:#dc3545; }
      .error-box { margin-top: 12px; font-size: 14px; color: #dc3545; min-height: 18px; }
      .success-box { margin-top: 12px; font-size: 14px; color: #16a34a; min-height: 18px; }
      .back-link { position:absolute; top:24px; left:24px; color:var(--primary); text-decoration:none; font-weight:600; display:flex; align-items:center; gap:8px; }
      .back-link:hover { text-decoration: underline; }
      @media (max-width: 768px){ .form-grid{grid-template-columns:1fr;} .back-link{position:relative; top:auto; left:auto; margin-bottom:20px;} }
    </style>
  </head>
  <body data-page="company-register">
    <a href="../index.html" class="back-link">‚Üê Back to Company Portal</a>

    <main class="container">
      <div class="registration-container">
        <div class="registration-header">
          <div class="company-icon">üè¢</div>
          <h1 class="registration-title">Join InteU as a Company</h1>
          <p class="registration-subtitle">Connect with talented students and find the perfect interns for your organization. Start posting internship opportunities today.</p>
        </div>

        <div class="benefits-grid">
          <div class="benefit-card"><span class="benefit-icon">üéØ</span><h4 class="benefit-title">Targeted Reach</h4><p class="benefit-desc">Connect with qualified students from top universities across Thailand</p></div>
          <div class="benefit-card"><span class="benefit-icon">‚ö°</span><h4 class="benefit-title">Easy Management</h4><p class="benefit-desc">Streamlined application process and comprehensive candidate management tools</p></div>
          <div class="benefit-card"><span class="benefit-icon">‚úÖ</span><h4 class="benefit-title">Verified Platform</h4><p class="benefit-desc">Trusted by students and companies with verified profiles and secure communication</p></div>
        </div>

        <div id="formError" class="error-box" aria-live="polite"></div>
        <div id="formSuccess" class="success-box" aria-live="polite"></div>

        <form id="companyRegistrationForm" novalidate>
          <div class="form-grid">
            <div class="form-section">
              <h3>Company Information</h3>
              <label><span>Company Name *</span><input type="text" id="companyName" required placeholder="Your Company Name" /></label>
              <label>
                <span>Industry *</span>
                <select id="industry" required>
                  <option value="">Select Industry</option>
                  <option value="technology">Technology</option><option value="finance">Finance</option><option value="healthcare">Healthcare</option>
                  <option value="education">Education</option><option value="retail">Retail</option><option value="manufacturing">Manufacturing</option>
                  <option value="consulting">Consulting</option><option value="media">Media & Entertainment</option><option value="nonprofit">Non-Profit</option>
                  <option value="other">Other</option>
                </select>
              </label>
              <label>
                <span>Company Size *</span>
                <select id="companySize" required>
                  <option value="">Select Size</option>
                  <option value="1-10">1-10 employees</option><option value="11-50">11-50 employees</option><option value="51-200">51-200 employees</option>
                  <option value="201-500">201-500 employees</option><option value="501-1000">501-1000 employees</option><option value="1000+">1000+ employees</option>
                </select>
              </label>
              <label><span>Founded Year</span><input type="number" id="foundedYear" min="1800" max="2100" placeholder="e.g., 2015" /></label>
              <label><span>Company Description *</span><textarea id="companyDescription" required rows="4" placeholder="Describe your company, mission, and what makes it unique..."></textarea></label>
            </div>

            <div class="form-section">
              <h3>Contact Information</h3>
              <label><span>Business Email *</span><input type="email" id="businessEmail" required placeholder="contact@yourcompany.com" /></label>
              <label><span>Phone Number *</span><input type="tel" id="phoneNumber" required placeholder="+66 XX XXX XXXX" /></label>
              <label><span>Website</span><input type="url" id="website" placeholder="https://www.yourcompany.com" /></label>
              <label><span>LinkedIn Company Page</span><input type="url" id="linkedin" placeholder="https://linkedin.com/company/yourcompany" /></label>
              <label><span>Address *</span><textarea id="address" required rows="3" placeholder="Full business address including city and postal code..."></textarea></label>
            </div>

            <div class="form-section">
              <h3>Account Security</h3>
              <label><span>Account Manager Name *</span><input type="text" id="managerName" required placeholder="Full name of the person managing this account" /></label>
              <label><span>Manager Title</span><input type="text" id="managerTitle" placeholder="e.g., HR Manager, Talent Acquisition Lead" /></label>
              <label><span>Password *</span><input type="password" id="password" required /></label>
              <label><span>Confirm Password *</span><input type="password" id="confirmPassword" required /></label>

              <div class="password-requirements">
                <div class="requirement" id="lengthReq"><span>‚úó</span> At least 8 characters</div>
                <div class="requirement" id="upperReq"><span>‚úó</span> One uppercase letter</div>
                <div class="requirement" id="lowerReq"><span>‚úó</span> One lowercase letter</div>
                <div class="requirement" id="numberReq"><span>‚úó</span> One number</div>
              </div>
            </div>

            <div class="form-section">
              <h3>Additional Information</h3>
              <label>
                <span>How did you hear about InteU?</span>
                <select id="referralSource">
                  <option value="">Select source</option><option value="search">Search Engine</option><option value="social">Social Media</option>
                  <option value="referral">Referral from another company</option><option value="university">University partnership</option>
                  <option value="event">Event or conference</option><option value="other">Other</option>
                </select>
              </label>

              <label>
                <span>Expected number of interns per year</span>
                <select id="expectedInterns">
                  <option value="">Select range</option><option value="1-5">1-5 interns</option><option value="6-15">6-15 interns</option>
                  <option value="16-30">16-30 interns</option><option value="31-50">31-50 interns</option><option value="50+">50+ interns</option>
                </select>
              </label>

              <label>
                <span>Primary internship areas (select multiple)</span>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin-top:8px;">
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="technology" /><span>Technology</span></label>
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="marketing" /><span>Marketing</span></label>
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="finance" /><span>Finance</span></label>
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="design" /><span>Design</span></label>
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="operations" /><span>Operations</span></label>
                  <label class="checkbox"><input type="checkbox" name="internshipAreas" value="research" /><span>Research</span></label>
                </div>
              </label>
            </div>
          </div>

          <div class="form-section full-width">
            <label class="checkbox"><input type="checkbox" id="agreeTerms" required /><span>I agree to the <a href="#" class="link">Terms of Service</a> and <a href="#" class="link">Privacy Policy</a> *</span></label>
            <label class="checkbox"><input type="checkbox" id="agreeMarketing" /><span>I would like to receive updates about new features and internship best practices</span></label>

            <div style="display:flex; gap:16px; justify-content:center; margin-top:24px;">
              <button type="button" class="btn secondary" onclick="window.location.href='login.html'">Back to Login</button>
              <button type="submit" id="createBtn" class="btn primary">Create Company Account</button>
            </div>
          </div>
        </form>

        <div style="text-align:center; margin-top:32px; padding-top:24px; border-top:1px solid rgba(0,0,0,0.1);">
          <p class="muted">Already have a company account?</p>
          <a href="login.html" class="btn secondary">Login to Your Account</a>
        </div>
      </div>
    </main>

    <script>
      (function(){
        const AUTH_KEY = 'inteu_company_auth';
        const PROFILES_KEY = 'inteu_company_profiles';

        const form = document.getElementById('companyRegistrationForm');
        const errBox = document.getElementById('formError');
        const okBox  = document.getElementById('formSuccess');
        const createBtn = document.getElementById('createBtn');

        // If already logged in, go to dashboard
        try {
          const auth = JSON.parse(localStorage.getItem(AUTH_KEY) || 'null');
          if (auth && auth.email) { window.location.href = '../dashboard.html'; return; }
        } catch(e){}

        // Password live validation
        const pwd = document.getElementById('password');
        const cpw = document.getElementById('confirmPassword');
        pwd.addEventListener('input', updatePasswordReqs);
        cpw.addEventListener('input', updatePasswordReqs);

        function updatePasswordReqs(){
          const p = pwd.value;
          setReq('lengthReq', p.length >= 8);
          setReq('upperReq', /[A-Z]/.test(p));
          setReq('lowerReq', /[a-z]/.test(p));
          setReq('numberReq', /\d/.test(p));
        }
        function setReq(id, ok){
          const el = document.getElementById(id);
          if(!el) return;
          el.className = 'requirement ' + (ok ? 'valid':'invalid');
          el.querySelector('span').textContent = ok ? '‚úì':'‚úó';
        }

        function readProfiles() {
          try { return JSON.parse(localStorage.getItem(PROFILES_KEY) || '{}'); } catch { return {}; }
        }
        function writeProfiles(map) {
          localStorage.setItem(PROFILES_KEY, JSON.stringify(map));
        }

        form.addEventListener('submit', function(e){
          e.preventDefault();
          errBox.textContent = '';
          okBox.textContent  = '';

          const requiredIds = ['companyName','industry','companySize','companyDescription','businessEmail','phoneNumber','address','managerName','password','confirmPassword'];
          for (const id of requiredIds){
            const el = document.getElementById(id);
            if(!el || !String(el.value||'').trim()){
              errBox.textContent = 'Please fill in the required field: ' + id.replace(/([A-Z])/g,' $1');
              el && el.focus();
              return;
            }
          }
          if (!document.getElementById('agreeTerms').checked){
            errBox.textContent = 'Please agree to the Terms and Privacy Policy.';
            return;
          }
          if (pwd.value !== cpw.value){
            errBox.textContent = 'Passwords do not match.';
            cpw.focus();
            return;
          }

          const getVal = id => (document.getElementById(id)?.value || '').trim();
          const getAreas = () => Array.from(document.querySelectorAll('input[name="internshipAreas"]:checked')).map(i=>i.value);

          const profile = {
            companyName: getVal('companyName'),
            industry: getVal('industry'),
            companySize: getVal('companySize'),
            foundedYear: getVal('foundedYear'),
            companyDescription: getVal('companyDescription'),
            businessEmail: getVal('businessEmail').toLowerCase(),
            phoneNumber: getVal('phoneNumber'),
            website: getVal('website'),
            linkedin: getVal('linkedin'),
            address: getVal('address'),
            managerName: getVal('managerName'),
            managerTitle: getVal('managerTitle'),
            referralSource: getVal('referralSource'),
            expectedInterns: getVal('expectedInterns'),
            internshipAreas: getAreas(),
            settings: { timezone: 'UTC+7', language: 'en', dateFormat: 'YYYY-MM-DD' },
            stats: { activeInternships: 0, totalApplications: 0, hired: 0 },
            createdAt: Date.now(),
            logoDataUrl: ""
          };

          // Save profile into profiles map (per email)
          try {
            const map = readProfiles();
            map[profile.businessEmail] = profile;
            writeProfiles(map);

            // Set auth session
            localStorage.setItem(AUTH_KEY, JSON.stringify({ email: profile.businessEmail, loggedInAt: Date.now() }));
          } catch (e) {
            errBox.textContent = 'Storage is not available. Please enable local storage.';
            return;
          }

          createBtn.disabled = true;
          createBtn.textContent = 'Creating...';
          window.location.href = '../dashboard.html';
        });
      })();
    </script>
  </body>
</html>
