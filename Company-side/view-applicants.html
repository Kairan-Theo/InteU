<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InteU ‚Äî View Applicants</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/styles.css" />
    <style>
      .company-nav {
        background: var(--card);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 25px;
        box-shadow: var(--shadow);
        padding: 8px 16px;
        margin-bottom: 24px;
        max-width: 100%;           /* Prevent overflow */
        min-width: 100%;           /* Force full width */
        box-sizing: border-box;    /* Keeps width consistent */
      }

      .company-nav-links {
        display: flex;
        justify-content: space-between;   /* Space between main nav and logout */
        align-items: center;
        gap: 6px;
        flex-wrap: wrap;
        max-width: 1200px;         /* ‚úÖ Lock nav width to dashboard's container size */
        margin: 0 auto;            /* Center the whole group */
      }
      .nav-main-links {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
      }
      .nav-logout {
        margin-left: auto;
      }
      .company-nav-link {
        padding: 6px 12px;
        border-radius: 20px;
        text-decoration: none;
        color: var(--text);
        transition: background-color 0.2s ease;
        font-size: 14px;
      }
      .company-nav-link:hover {
        background: rgba(75, 123, 229, 0.1);
        text-decoration: none;
        color: var(--text);
      }
      .company-nav-link.active {
        background: var(--primary);
        color: white;
      }
      .filters-section {
        background: var(--card);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 14px;
        box-shadow: var(--shadow);
        padding: 20px;
        margin-bottom: 24px;
      }
      .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 16px;
      }
      .search-bar {
        grid-column: 1 / -1;
      }
      .applicant-card {
        background: var(--card);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 14px;
        box-shadow: var(--shadow);
        padding: 24px;
        margin-bottom: 16px;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .applicant-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      }
      .applicant-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 16px;
      }
      .applicant-info {
        flex: 1;
      }
      .applicant-name {
        font-size: 20px;
        font-weight: 700;
        color: var(--text);
        margin-bottom: 4px;
      }
      .applicant-education {
        color: var(--muted);
        margin-bottom: 8px;
      }
      .applicant-meta {
        display: flex;
        gap: 16px;
        margin-bottom: 16px;
        flex-wrap: wrap;
      }
      .meta-item {
        display: flex;
        align-items: center;
        gap: 6px;
        color: var(--muted);
        font-size: 14px;
      }
      .status-badge {
        padding: 4px 12px;
        border-radius: 16px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
      }
      .status-pending {
        background: #fff3cd;
        color: #856404;
      }
      .status-accepted {
        background: #d4edda;
        color: #155724;
      }
      .status-rejected {
        background: #f8d7da;
        color: #721c24;
      }
      .status-interview {
        background: #cce5ff;
        color: #004085;
      }
      .applicant-skills {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 16px;
      }
      .skill-chip {
        background: rgba(75, 123, 229, 0.1);
        color: var(--primary);
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
      }
      .applicant-actions {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .action-btn {
        padding: 8px 16px;
        border: none;
        border-radius: 8px;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
      }
      .btn-view {
        background: var(--primary);
        color: white;
      }
      .btn-accept {
        background: #28a745;
        color: white;
      }
      .btn-reject {
        background: #dc3545;
        color: white;
      }
      .btn-interview {
        background: #17a2b8;
        color: white;
      }
      .btn-message {
        background: #6c757d;
        color: white;
      }
      .action-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 24px;
      }
      .stat-card {
        background: var(--card);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 14px;
        box-shadow: var(--shadow);
        padding: 20px;
        text-align: center;
      }
      .stat-number {
        font-size: 32px;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 8px;
      }
      .stat-label {
        color: var(--muted);
        font-size: 14px;
      }
      .bulk-actions {
        background: var(--card);
        border: 1px solid rgba(0,0,0,0.06);
        border-radius: 14px;
        box-shadow: var(--shadow);
        padding: 16px;
        margin-bottom: 24px;
        display: none;
      }
      .bulk-actions.show {
        display: block;
      }
      .applicant-checkbox {
        margin-right: 12px;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.5);
      }
      .modal-content {
        background-color: var(--card);
        margin: 5% auto;
        padding: 32px;
        border-radius: 14px;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
      }
      .close {
        color: var(--muted);
        float: right;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
      }
      .close:hover {
        color: var(--text);
      }
    </style>
  </head>
  <body data-page="dashboard">
  <header class="site-header" aria-label="Company Portal Navigation">
    <div class="container header-inner">
      <a class="logo" href="index.html">
        <span class="logo-mark">üè¢</span> 
        InteU <span style="color: var(--primary); font-weight: 600;">Companies</span>
      </a>

      <div class="actions">
        <input type="checkbox" id="dark-mode" aria-label="Toggle theme" hidden>
        <label for="dark-mode" class="theme-switch" aria-label="Toggle theme"></label>
        <a href="profile.html" class="btn small">Profile</a>
        <a href="auth/login.html" class="btn small primary">Logout</a>
      </div>
    </div>
  </header>

    <main class="container">
      <!-- Company Navigation -->
      <nav class="company-nav">
        <div class="company-nav-links">
          <div class="nav-main-links">
            <a href="dashboard.html" class="company-nav-link">Dashboard</a>
            <a href="post-internship.html" class="company-nav-link">Post Internship</a>
            <a href="manage-internships.html" class="company-nav-link">Manage Internships</a>
            <a href="view-applicants.html" class="company-nav-link active">View Applicants</a>
            <a href="messages.html" class="company-nav-link">Messages</a>
            <a href="profile.html" class="company-nav-link">Company Profile</a>
          </div>
          <a href="auth/login.html" class="company-nav-link nav-logout">Logout</a>
        </div>
      </nav>

      <h1>Applicant Management</h1>
      <p class="muted">Review and manage applications for your internship positions</p>

      <!-- Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-number">47</div>
          <div class="stat-label">Total Applications</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">23</div>
          <div class="stat-label">Pending Review</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">12</div>
          <div class="stat-label">Accepted</div>
        </div>
        <div class="stat-card">
          <div class="stat-number">8</div>
          <div class="stat-label">Interviews Scheduled</div>
        </div>
      </div>

      <!-- Filters -->
      <div class="filters-section">
        <div class="filters-grid">
          <div class="search-bar">
            <label>
              <span>Search Applicants</span>
              <input type="text" id="searchInput" placeholder="Search by name, education, skills..." />
            </label>
          </div>
          <label>
            <span>Internship Position</span>
            <select id="positionFilter">
              <option value="">All Positions</option>
              <option value="software-engineer">Software Engineering Intern</option>
              <option value="marketing">Marketing Intern</option>
              <option value="design">UI/UX Design Intern</option>
              <option value="data-analyst">Data Analyst Intern</option>
            </select>
          </label>
          <label>
            <span>Application Status</span>
            <select id="statusFilter">
              <option value="">All Statuses</option>
              <option value="pending">Pending</option>
              <option value="interview">Interview</option>
              <option value="accepted">Accepted</option>
              <option value="rejected">Rejected</option>
            </select>
          </label>
          <label>
            <span>Education Level</span>
            <select id="educationFilter">
              <option value="">All Levels</option>
              <option value="bachelor">Bachelor's</option>
              <option value="master">Master's</option>
              <option value="phd">PhD</option>
            </select>
          </label>
          <label>
            <span>Application Date</span>
            <select id="dateFilter">
              <option value="">All Dates</option>
              <option value="today">Today</option>
              <option value="week">This Week</option>
              <option value="month">This Month</option>
            </select>
          </label>
        </div>
        <div style="display: flex; gap: 12px; justify-content: space-between; align-items: center;">
          <div>
            <input type="checkbox" id="selectAll" />
            <label for="selectAll">Select All</label>
          </div>
          <button id="clearFilters" class="btn secondary small">Clear Filters</button>
        </div>
      </div>

      <!-- Bulk Actions -->
      <div class="bulk-actions" id="bulkActions">
        <div style="display: flex; gap: 12px; align-items: center;">
          <span><span id="selectedCount">0</span> applicants selected</span>
          <button class="action-btn btn-accept">Accept Selected</button>
          <button class="action-btn btn-reject">Reject Selected</button>
          <button class="action-btn btn-interview">Schedule Interview</button>
          <button class="action-btn btn-message">Send Message</button>
        </div>
      </div>

      <!-- Applicants List -->
      <div id="applicantsList">
        <!-- Sample Applicant Cards -->
        <div class="applicant-card" data-status="pending" data-position="software-engineer" data-education="bachelor">
          <div class="applicant-header">
            <div class="applicant-info">
              <input type="checkbox" class="applicant-checkbox" />
              <div class="applicant-name">Sarah Johnson</div>
              <div class="applicant-education">Computer Science, University of Technology</div>
            </div>
            <span class="status-badge status-pending">Pending</span>
          </div>
          
          <div class="applicant-meta">
            <div class="meta-item">
              <span>üìß</span>
              <span>sarah.johnson@email.com</span>
            </div>
            <div class="meta-item">
              <span>üì±</span>
              <span>+1 (555) 123-4567</span>
            </div>
            <div class="meta-item">
              <span>üìÖ</span>
              <span>Applied 2 days ago</span>
            </div>
            <div class="meta-item">
              <span>üíº</span>
              <span>Software Engineering Intern</span>
            </div>
          </div>

          <div class="applicant-skills">
            <span class="skill-chip">JavaScript</span>
            <span class="skill-chip">React</span>
            <span class="skill-chip">Node.js</span>
            <span class="skill-chip">Python</span>
            <span class="skill-chip">Git</span>
          </div>

          <div class="applicant-actions">
            <button class="action-btn btn-view" onclick="viewApplicant('sarah-johnson')">View Details</button>
            <button class="action-btn btn-accept" onclick="updateStatus('sarah-johnson', 'accepted')">Accept</button>
            <button class="action-btn btn-interview" onclick="updateStatus('sarah-johnson', 'interview')">Interview</button>
            <button class="action-btn btn-reject" onclick="updateStatus('sarah-johnson', 'rejected')">Reject</button>
            <button class="action-btn btn-message" onclick="sendMessage('sarah-johnson')">Message</button>
          </div>
        </div>

        <div class="applicant-card" data-status="interview" data-position="marketing" data-education="bachelor">
          <div class="applicant-header">
            <div class="applicant-info">
              <input type="checkbox" class="applicant-checkbox" />
              <div class="applicant-name">Michael Chen</div>
              <div class="applicant-education">Marketing, Business University</div>
            </div>
            <span class="status-badge status-interview">Interview</span>
          </div>
          
          <div class="applicant-meta">
            <div class="meta-item">
              <span>üìß</span>
              <span>michael.chen@email.com</span>
            </div>
            <div class="meta-item">
              <span>üì±</span>
              <span>+1 (555) 987-6543</span>
            </div>
            <div class="meta-item">
              <span>üìÖ</span>
              <span>Applied 5 days ago</span>
            </div>
            <div class="meta-item">
              <span>üíº</span>
              <span>Marketing Intern</span>
            </div>
          </div>

          <div class="applicant-skills">
            <span class="skill-chip">Digital Marketing</span>
            <span class="skill-chip">Social Media</span>
            <span class="skill-chip">Analytics</span>
            <span class="skill-chip">Content Creation</span>
          </div>

          <div class="applicant-actions">
            <button class="action-btn btn-view" onclick="viewApplicant('michael-chen')">View Details</button>
            <button class="action-btn btn-accept" onclick="updateStatus('michael-chen', 'accepted')">Accept</button>
            <button class="action-btn btn-reject" onclick="updateStatus('michael-chen', 'rejected')">Reject</button>
            <button class="action-btn btn-message" onclick="sendMessage('michael-chen')">Message</button>
          </div>
        </div>

        <div class="applicant-card" data-status="accepted" data-position="design" data-education="master">
          <div class="applicant-header">
            <div class="applicant-info">
              <input type="checkbox" class="applicant-checkbox" />
              <div class="applicant-name">Emily Rodriguez</div>
              <div class="applicant-education">Design, Art Institute</div>
            </div>
            <span class="status-badge status-accepted">Accepted</span>
          </div>
          
          <div class="applicant-meta">
            <div class="meta-item">
              <span>üìß</span>
              <span>emily.rodriguez@email.com</span>
            </div>
            <div class="meta-item">
              <span>üì±</span>
              <span>+1 (555) 456-7890</span>
            </div>
            <div class="meta-item">
              <span>üìÖ</span>
              <span>Applied 1 week ago</span>
            </div>
            <div class="meta-item">
              <span>üíº</span>
              <span>UI/UX Design Intern</span>
            </div>
          </div>

          <div class="applicant-skills">
            <span class="skill-chip">Figma</span>
            <span class="skill-chip">Adobe Creative Suite</span>
            <span class="skill-chip">Prototyping</span>
            <span class="skill-chip">User Research</span>
          </div>

          <div class="applicant-actions">
            <button class="action-btn btn-view" onclick="viewApplicant('emily-rodriguez')">View Details</button>
            <button class="action-btn btn-message" onclick="sendMessage('emily-rodriguez')">Message</button>
          </div>
        </div>
      </div>
    </main>

    <!-- Applicant Details Modal -->
    <div id="applicantModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="modalApplicantName">Applicant Details</h2>
        <div id="modalApplicantContent">
          <!-- Detailed applicant information will be loaded here -->
        </div>
      </div>
    </div>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div>
          <h4>Help & Support</h4>
          <ul>
            <li><a href="#" id="contactUsLink">Contact us</a></li>
            <li><a href="#" id="faqLink">FAQ</a></li>
          </ul>
        </div>
        <div>
          <h4>Privacy</h4>
          <ul>
            <li><a href="#" id="privacyPolicyLink">Privacy Policy</a></li>
            <li><a href="#" id="pdpaNoticeLink">PDPA Notice</a></li>
          </ul>
        </div>
        <div>
          <h4>InteU</h4>
          <p class="muted">Trusted internships for global learners.</p>
        </div>
      </div>
    </footer>

    <div id="toastContainer" class="toast-container" aria-live="polite" aria-atomic="true"></div>

    <script src="../js/main.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Filter functionality
        const searchInput = document.getElementById('searchInput');
        const positionFilter = document.getElementById('positionFilter');
        const statusFilter = document.getElementById('statusFilter');
        const educationFilter = document.getElementById('educationFilter');
        const dateFilter = document.getElementById('dateFilter');
        const clearFiltersBtn = document.getElementById('clearFilters');
        const selectAllCheckbox = document.getElementById('selectAll');
        const bulkActions = document.getElementById('bulkActions');
        const selectedCountSpan = document.getElementById('selectedCount');

        // Add event listeners for filters
        [searchInput, positionFilter, statusFilter, educationFilter, dateFilter].forEach(filter => {
          filter.addEventListener('input', applyFilters);
          filter.addEventListener('change', applyFilters);
        });

        clearFiltersBtn.addEventListener('click', clearFilters);

        function applyFilters() {
          const searchTerm = searchInput.value.toLowerCase();
          const positionValue = positionFilter.value;
          const statusValue = statusFilter.value;
          const educationValue = educationFilter.value;
          const dateValue = dateFilter.value;

          const applicantCards = document.querySelectorAll('.applicant-card');
          
          applicantCards.forEach(card => {
            const name = card.querySelector('.applicant-name').textContent.toLowerCase();
            const education = card.querySelector('.applicant-education').textContent.toLowerCase();
            const skills = Array.from(card.querySelectorAll('.skill-chip')).map(chip => chip.textContent.toLowerCase()).join(' ');
            const position = card.dataset.position;
            const status = card.dataset.status;
            const educationLevel = card.dataset.education;

            const matchesSearch = !searchTerm || name.includes(searchTerm) || education.includes(searchTerm) || skills.includes(searchTerm);
            const matchesPosition = !positionValue || position === positionValue;
            const matchesStatus = !statusValue || status === statusValue;
            const matchesEducation = !educationValue || educationLevel === educationValue;

            if (matchesSearch && matchesPosition && matchesStatus && matchesEducation) {
              card.style.display = 'block';
            } else {
              card.style.display = 'none';
            }
          });
        }

        function clearFilters() {
          searchInput.value = '';
          positionFilter.value = '';
          statusFilter.value = '';
          educationFilter.value = '';
          dateFilter.value = '';
          applyFilters();
        }

        // Checkbox selection functionality
        const applicantCheckboxes = document.querySelectorAll('.applicant-checkbox');
        
        applicantCheckboxes.forEach(checkbox => {
          checkbox.addEventListener('change', updateBulkActions);
        });

        selectAllCheckbox.addEventListener('change', function() {
          const visibleCheckboxes = Array.from(applicantCheckboxes).filter(checkbox => 
            checkbox.closest('.applicant-card').style.display !== 'none'
          );
          
          visibleCheckboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
          });
          
          updateBulkActions();
        });

        function updateBulkActions() {
          const checkedBoxes = Array.from(applicantCheckboxes).filter(checkbox => checkbox.checked);
          const count = checkedBoxes.length;
          
          selectedCountSpan.textContent = count;
          
          if (count > 0) {
            bulkActions.classList.add('show');
          } else {
            bulkActions.classList.remove('show');
          }
        }

        // Modal functionality
        const modal = document.getElementById('applicantModal');
        const closeModal = document.querySelector('.close');

        closeModal.addEventListener('click', function() {
          modal.style.display = 'none';
        });

        window.addEventListener('click', function(event) {
          if (event.target === modal) {
            modal.style.display = 'none';
          }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', function() {
          if (confirm('Are you sure you want to logout?')) {
            showToast('Logging out...', 'info');
            setTimeout(() => {
              window.location.href = '../pages/auth/login.html';
            }, 1000);
          }
        });
      });

      // Global functions for applicant actions
      function viewApplicant(applicantId) {
        const modal = document.getElementById('applicantModal');
        const modalName = document.getElementById('modalApplicantName');
        const modalContent = document.getElementById('modalApplicantContent');

        // Sample detailed content - in real app, this would fetch from API
        modalName.textContent = 'Sarah Johnson - Detailed Profile';
        modalContent.innerHTML = `
          <div style="margin-bottom: 24px;">
            <h3>Contact Information</h3>
            <p><strong>Email:</strong> sarah.johnson@email.com</p>
            <p><strong>Phone:</strong> +1 (555) 123-4567</p>
            <p><strong>LinkedIn:</strong> linkedin.com/in/sarahjohnson</p>
            <p><strong>Portfolio:</strong> sarahjohnson.dev</p>
          </div>
          
          <div style="margin-bottom: 24px;">
            <h3>Education</h3>
            <p><strong>Degree:</strong> Bachelor of Science in Computer Science</p>
            <p><strong>University:</strong> University of Technology</p>
            <p><strong>GPA:</strong> 3.8/4.0</p>
            <p><strong>Expected Graduation:</strong> May 2024</p>
          </div>
          
          <div style="margin-bottom: 24px;">
            <h3>Experience</h3>
            <p><strong>Software Development Intern</strong> - TechStart Inc. (Summer 2023)</p>
            <p>Developed web applications using React and Node.js, collaborated with senior developers on feature implementation.</p>
          </div>
          
          <div style="margin-bottom: 24px;">
            <h3>Cover Letter</h3>
            <p>I am excited to apply for the Software Engineering Intern position at your company. With my strong foundation in computer science and hands-on experience in web development, I am confident I can contribute meaningfully to your team...</p>
          </div>
          
          <div style="display: flex; gap: 12px; margin-top: 24px;">
            <button class="btn primary" onclick="downloadResume('sarah-johnson')">Download Resume</button>
            <button class="btn secondary" onclick="downloadTranscript('sarah-johnson')">Download Transcript</button>
          </div>
        `;

        modal.style.display = 'block';
      }

      function updateStatus(applicantId, newStatus) {
        const statusMap = {
          'pending': 'Pending Review',
          'interview': 'Interview Scheduled',
          'accepted': 'Accepted',
          'rejected': 'Rejected'
        };

        showToast(`Applicant status updated to: ${statusMap[newStatus]}`, 'success');
        
        // In a real application, this would make an API call to update the status
        // For demo purposes, we'll just show the toast
      }

      function sendMessage(applicantId) {
        showToast('Opening message composer...', 'info');
        // In a real application, this would open a message composer or redirect to messages page
        setTimeout(() => {
          window.location.href = 'messages.html';
        }, 1000);
      }

      function downloadResume(applicantId) {
        showToast('Downloading resume...', 'info');
        // In a real application, this would trigger a file download
      }

      function downloadTranscript(applicantId) {
        showToast('Downloading transcript...', 'info');
        // In a real application, this would trigger a file download
      }
    </script>
  </body>
</html>